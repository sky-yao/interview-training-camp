v-if和v-for哪个优先级更高? 如果两个同时出现, 应该怎么优化得到更好的性能?
---------


### 我的回答:

当Vue处理指令时, v-for的优先级高于v-if. v-for每次都会遍历整个列表（哪怕只有微小的变动）, 在遍历的过程中再进行v-if判断. 建议永远不要把 v-if 和 v-for 同时用在同一个元素上.

优化方案包括:

1. v-if和v-for放在不同的标签上;
2. 如果需要过滤列表中的某些数据，可以在v-for之前，用计算属性过滤掉v-if那部分数据，再返回需要的数据;
3. 为了避免渲染本该隐藏的列表，可以把v-if放在容器的元素上.



### 杨老师解答：

​	首先，不能单纯从网上找答案，而是需要在源码找到答案。

​	比如此处在源码compiler/codegen/index.js

#### 	结论是：

1. v-for的优先级高于v-if的。源码中，在genElement方法中，可以明确看到v-for的判断先于v-if的判断，是铁证咯！
2. 如果同时出现，则分情况具体讨论：

- ​	如果v-for 和 v-if是同级的时候也就是在同一个标签上（或v-if在v-for的循环里面），渲染结果过程为：会先执行v-for的循环逻辑，在循环之中进行v-if的条件判断。也就是不管v-if是什么结果，v-for都必定会执行，因此会造成性能浪费。
-  如果v-for 和 v-if不在同一级时，如果v-if条件不满足，那么v-for是不会进行相应的渲染的。
- 要避免出现这种情况，则在外层嵌套template，在这一层进行v-if判断，在里面进行v-for循环。
- 还有一种情况是：如果需要判断列表数据中某项或某些属性值，则可以先用计算属性过滤到对应的不满足情况的数据之后，再生成对应的v-for列表，这样也是对性能进行了提升。
### 谈谈你对Vue组件之间通信的理解？

#### 我的回答：

Vue组件间相互通信有多种方式，主要包括：

1. 父子组件之间的通信： 父组件通过props属性方式向子组件传递，子组件中通过Vue.$emit方法触发指定事件，父组件在调用子组件的地方进行v-on指定事件的监听，进而获取从子组件中传入过来的数据。

2. 中央事件总线方式：通过new一个空的Vue实例作为中央事件总线（也叫事件中心），用它来触发事件和监听事件，实现任何组件间的通信，包括父子/兄弟/跨级元素。

   ```js
   //实现方式：
   var bus = new Vue();
   bus.$emit('事件名','数据');
   bus.$on('事件名', data => {})
   //触发事件的组件通过$emit触发  需要监听的组件通过$on进行监听
   ```

3. 使用Vue官方推荐的状态管理工具：Vuex: Vuex实现了一个单项数据流，在全局拥有一个State存放数据，当组件要更改State中的数据时，必须通过Mutation进行，Mutation同时提供了订阅者模式供外部插件调用获取State数据的更新。而当所有异步操作或批量的同步操作需要走Action，但Action也是无法直接修改State的，也是要通过Mutation来修改。最后，根据State的变化，进行视图更新。

4. 多级组件嵌套传递数据时，可使用Vue2.4+版本提供的方法：$attrs/$listeners。其中，$attrs包含了父作用域中不被prop所识别且获取的特性绑定(class和style除外)。当一个组件没有声明任何props时，$attrs会包含所有父作用域的绑定(class和style除外)，并且可以通过v-bind="$attrs"传入内部组件。通常配合interitAttrs选项一起使用；$listeners包含了父作用域中(不含.native修饰器的)v-on事件监听器。可以通过v-on="$listeners"传入内部组件。

5. provide/inject: 祖先组件中通过provide提供变量，然后再子孙组件中通过inject来注入变量。主要是解决了跨级组件间的通信问题，主要使用场景则是子组件获取上级组件的状态，跨级组件间建立了一种主动提供与依赖注入的关系。需要注意的是，provide/inject绑定的数据并不是响应式的。

6. $parent/$children: 用于获取父/子组件的实例，再获取对应的数据或方法

7. ref：如果在普通的DOM元素上使用，引用指向的就是DOM元素；如果用在子组件上，引用就指向组件实例。如果在v-for循环中使用，则指向v-for循环的DOM列表数组。